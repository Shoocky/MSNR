% !TEX encoding = UTF-8 Unicode

\documentclass[a4paper]{article}

\usepackage{color}
\usepackage{url}
\usepackage[T2A]{fontenc} % enable Cyrillic fonts
\usepackage[utf8]{inputenc} % make weird characters work
\usepackage{graphicx}
\usepackage{listings}
\usepackage{amsthm}
\usepackage[english,serbian]{babel}
%\usepackage[english,serbianc]{babel} %ukljuciti babel sa ovim opcijama, umesto gornjim, ukoliko se koristi cirilica

\usepackage[unicode]{hyperref}
\hypersetup{colorlinks,citecolor=green,filecolor=green,linkcolor=blue,urlcolor=blue}

\lstMakeShortInline[columns=fixed]|

%\newtheorem{primer}{Пример}[section] %ćirilični primer
\newtheorem{primer}{Primer}[section]
\newtheorem{definicija}{Definicija}[section]

\begin{document}

\title{Git kroz primere\\ \small{Seminarski rad u okviru kursa\\Metodologija stručnog i naučnog rada\\ Matematički fakultet}}

\author{Nemanja Radosavljević, Milan Stojković\\ shoocky1337@gmail.com, milanzp@hotmail.com}
\date{9.~april 2016.}
\maketitle

\abstract{

Ovaj rad pokušava da pruži kratak vodič kroz jedan od najčešće korišćenih i najpopularnijih sistema za kontrolu verzija. Git. Rad prolazi kroz osnovne komande i način funkcionisanja Git sistema, na način koji bi trebalo da obezbedi da čitalac po završetku čitanja može da počne sa samostalnim korišćenjem ovog sistema.


\tableofcontents

\newpage

\section{Uvod}
\label{sec:uvod}
Sistemi za kontrolu verzija predstavljaju jedan od najvažnijih alata pri razvoju softvera. Danas se teško može zamisliti bilo kakav projekat koji ne koristi jedan ovakav sistem. Nažalost, njihovo poznavanje se pretpostavlja, a studenti računarskih nauka se sa njima susreću samo kroz pominjanje.\\ Svrha ovo rada je pre svega upoznavanje citaoca koji nema nikakvo predznanje, ili je ono minimalno, sa osnovnim komandama i nainom funkcionisa sistema Git(u daljem tekstu samo Git). Rad moze da sluzi kao uvod potpunim pocetnicima, ili kao brzi podsednik naprednim korisnicima.\\
U ovom radu se nećemo baviti teorijskim osnovama kontrole verzija, kao što su implementacija praćenja promena, razlike izmedju distribuiranih i centralizovanih sistema za kontrolu verzija itd. Izvori koji sadrže detaljnija objasnjanja, kao i stvari koji su van okvira ovog rada se mogu naći u sekciji literatura.\\
Na početku se bavimo životnim ciklusom datoteke koja se nalazi u Git sistemu. Ovaj kratki, i jedini teorijski osvrt u ovom radu predstavlja osnovni preduslov za pravilno razumevanje načina na koji Git prati i čuva promene. Takodje izlažemo osnovnu terminologiju u sistemima za kontrolu verzija, u slučaju da je čitaocu ovo prvi dodir sa temom.\\
Potom se bavimo podešavanjem okruženja za rad.
Ostatak rada je koncipiran tako da se uvode redom osnovne Git komande, zajedno sa definicijom i primerom, na način koji bi po završetku čitanja, stvorio sliku o mogućnostima, efikasnosti i lakoći za rad koju pruža Git.
Za sve primere koristimo komandnu liniju (konzolu). Iako postoji veliki broj grafičkih korisničkih okruženja, oni spadaju van okvira ovog rada, a i sama komandna linija je više nego dovoljna za ilustraciju izabranih tema.

\section{Sekcije git projekta i životni ciklus datoteke}
\label{zivotni_ciklus}
Pre nego što počnemo sa razmatranjem korišćenja git sistema bilo bi zgodno uvesti neki osnovne pojmove vezane za kontrolu verzija. Ovo može koristiti korisnicima koji nemaju nikakvog prethodnog iskustva sa sistemima za kontrolu verzija. Sa druge strane, korisnici koji imaju iskustva mogu preskočiti ovaj deo i nastaviti od "Sekcije git projekta". Terminologija varira od sistema do sistema, pa ćemo se fokusariti samo na one univerzalne termine, koji su zajednički za sve sisteme.

\begin{definicija}
Repozitorijum ili baza predstavlja skup svih fajlava koja se nalaze pod kontrolom verzije.
\end{definicija}

\begin{definicija}
Verzija predstavlja sliku stanja sadržaja repozitorijuma u nekom trenutku razvoja.
\end{definicija}

\begin{definicija}
Radna kopija (working copy) predstavlja lokalnu kopiju verzije koja se menja tokom rada.
\end{definicija}

\begin{definicija}
Podizanje promene ili komit (commit) predstavlja akciju kojom se trenutno stanje zapisuje u repozitorijum. Takodje može da se koristi za referisanje odredjene promene.
\end{definicija}

\begin{definicija}
Grana (branch) predstavlja imenovan tok razvoja nezavistan od ostalih tokova.
\end{definicija}
Iako su grane medjusobno nezavisne, one uglavnom imaju zajednički neki deo njihove istorije. Svaka grana pocinje kao kopija neke druge granaei odatle nastavlja da se razvija nezavisno. Početna grana, odnosno ona koja nije nastala kopijom neke druge se sreće pod nazivima trunk, mainline, master.

\begin{definicija}
Konflikt predstavlja situaciju u kojoj dva korisnika pokusavaju da podignu izmenu koja se odnosi na isti deo iste datoteke.
\end{definicija}
Više reči o konfliktima će biti u poglavlju *.


\subsection{Sekcije git projekta}
\label{subsec:sekcije}
Kako bi se potpuno shvatilo funkcionisanje Gita, potrebno je razumeti njegove tri sekcije koje koristi za praćenje promena: Radni direktorijum, prostor za pripremu(eng. Staging area) i Git direktorijum odnosno baza. \textbf{Radni direktorijum} sadrži samo jednu verziju datoteka, i to one nad kojima se trenutno radi. To mogu biti datoteke koje ste povukli iz repozitorijuma ili novonapravljene datoteke, sa njima radite, odnosno njih menjate. \textbf{Staging area} je suštinski samo jedna datoteka koja čuva informacije o tome koje ste datoteke označili da želite da budu deo sledećeg komita. \textbf{Git direktorijum} je direktorijum u kom Git čuva sve meta podatke i bazu podataka svih fajlova koji su pod sistemom za kontrolom verzija. Iako postoji način da se datoteke direktno prebace iz radnog u Git direktorijum, to ne umanjuje znacaj sekcije Staging area. Na primer, ukoliko pri razvoju složenene funkcionalnosti napravite ispravnu, stabilnu verziju, medjutim želite da malo eksperimentišete sa njom jer mislite da postoji i bolje rešenje. Ukoliko ste je pre eksperimentisanja prebacili u Staging area, ne postoji bojazan da bilo šta izgubite. Ako eksperimentisanje dovede do toga da je datoteka bespovratno uništena, i dalje postoji ispravna verzija u Staging area koja se može komitovati.\\
Sa ovime u vidu, koraci u okviru jednog komita bi izgledali ovako.
\begin{enumerate}
\item Izmena datoteka
\item Odabir koje datoteke će učestvovati u sledećem komitu i njihovo prebacivanje u Staging Area
\item Komitovanje
\end{enumerate}

Posle svakog komita sadržaj radnog i Git direktorijuma će biti isti i ciklus se može ponovo započeti. Ilustracija ovih koraka je prikazana na slici \ref{fig:git_sekcije}.\\
Pored ovog smera kretanja kroz Git sekcije, mogući su i drugi, koji se koriste radi ispravljanja grešaka i njima se bavimo u poglavlju \ref{subsec:greske}




\subsection{Životni ciklus datoteke}
\label{subsec:ciklus}
Datoteke u radnom direktorijumu pre svega mogu biti \textbf{praćene} i \textbf{nepraćene}. Izrazi praćene i nepraćene nam suštinski govore da li se te datoteke u poslednjoj verziji nalaze pod sistemom za kontrolu verzija.
\linebreak \indent
One koju su \textbf{praćene} mogu biti \textbf{modifikovane, nemodifikovane} i \textbf{spremne za komitovanje (staged).} Pri prebacivanju datoteka iz Git direktorijuma u radni ili pri kloniranju repozitorijuma (o tome će biti reči kasnije), datoteke u radnom direktorijumu imaju status \textbf{nemodifikovane}. Menjanjem istih, Git ih prepoznaje kao \textbf{modifikovane} jer više nisu iste kao poslednja komitovana verzija. Označavanjem da je neka datoteka spremana za komitovanje i komitovanjem, životni ciklus te datoteke se zatvara. Verzija u radnom direktorijumu više nije različita od poslednje komitovane verzije, pa ta datoteka ponovo imas status nemodifikovane.
\linebreak \indent
\textbf{Nepraćene} datoteke, pored toga što mogu nastati pravljenjem novih datoteka, mogu biti i datoteke koje su bile pod sistemom za praćenje verzija, ali su obrisane odatle. Uvođenje nepraćenih datoteke pod sistem za kontrolu verzija započinje tako što se one označe kao spremne za komitovanje, a onda se mogu komitovati i time postaju praćene.



\section{Kreiranje repozitorijuma i osnovne komande}
\label{sec:kreiranje}

Kako bi Git mogao da prati ko je napravio izmene, pre svega je potrebno da mu se predstavite. Izmedju ostalog, za to koristimo  \texttt{git config} komandu.

\begin{lstlisting}[language=bash]
git config --global user.name <name>
git config --global user.email <email>
\end{lstlisting}

\noindent
Podešavanje imena korisnika je obavezno, jer se svaki komit vezuje za korisnika koji ga je napravio. Opcija |--global| označava da je podešavanje globalnog opsega, tj. važi za sve repozitorijume u sistemu. Izostavljanjem ove opcije podešavanje se vezaju samo za tekući repozitorijum. Sva podešavanja sa globnim opsegom se čuvaju u \textit{.gitconfig} datoteci u \textit{home} direktorijumu na Linux sistemima. Direktnim menjanjem sadržaja ove datoteke se može izbeći kucanje komandi za svako podešavanje koje želimo da promenimo. Dodatne informacije o |git config| komandi kao i neka zgodna podešavanja se mogu naći u dodatku *.

\subsection{Osnovne komande}
\label{osnovne_komande}

\subsubsection*{git init, git clone}
\label{subsec:git_init}
Git repozitorijum se može inicijalizovati u praznom direktorijumu, ali i u direktorijumu u kome se već radi na projektu. Za ovo se koristi komanda |git init|. Time će biti napravljen direktorijum \textit{.git} koji sadrži meta podatke repozitorijuma i pored toga sve ostalo ostaje nepromenjeno. Primer inicijalizacije repozitorijuma u novonapravljenom direktorijumu moze se videti na slici XXX.

U velikoj većini slučajeva, |git init| se poziva samo jednom, za pravljanje centralnog repozitorijuma. Kasnije, svi oni koji učestvuju u razvoju će taj repozitorijum kopirati na lokalne mašine korišćenjem komande:
\begin{lstlisting}[language=bash]
git clone <repozitorijum>
\end{lstlisting}
\noindent
gde |<repozitorijum>| treba zameniti adresom ogriginalnog repozitorijuma. Lokalni repozitorijum ima svoju istoriju izmena, svoje fajlove i potpuno je nezavisno okruženje od originalnog repozitorijuma. 

\begin{figure}[h!]
\begin{center}
\includegraphics[scale=0.55]{images/init.png}
\end{center}
\caption{inicijalizacija Git projekta}
\label{fig:git_sekcije}
\end{figure}

\subsubsection*{git status}
\label{subsec:git_status}
Provera koje su to datoteke spremne za komitovanje (Staging Area) može se uraditi komandom |git status|. Pored toga, korišćenjem iste komande prikazuje se koje su datoteke promenjene u odnosu na repozitorijum, ali nisu spremne za komitovanje, kao i datoteke koje ne postoje u repozitorijumu, odnosno sistem za kontrolu verzija ih i dalje ne prati.

\subsubsection*{git add}
\label{subsec:git_add}
Nakon pravljenja izmena u radnoj verziji koje želite da upišete u repozitorijum, potrebna je priprema tih datoteka, odnosno dodavanje datoteka u Staging Area. Priprema datoteka za komitovanje se vrši komandom |git add| koja može bit pozvana više puta pre komitovanja, za istu ili neku drugu datoteku.


\subsubsection*{git commit}
\label{subsec:git_commit}
Upisivanje promena u repozitorijum, odnosno komitovanje, zahteva od korisnika i poruku kojom opisuje promene. Pozivom |git commit| komande otvara se podrazumevani tekst editor gde je potrebno uneti opis, a nakon toga se komit čuva u repozitorijumu. Opcijom -m i navođenjem poruke nakon nje se naznačava da želimo da koristimo tu poruku kao opis i tada se ne otvara tekst editor.
\\\\
Svaki komit u bazi je jedinstveno odredjen SHA-1 heš vrednošću. Za referisanje se najčesće koristi skraćena verzija, odnosno prvih 7 karaktera (npr. 6cfaf1c).
Takodje, radi još lakšeg referisanja uvedena su specijalna imena za odredjene komitove. Jedan od njih je HEAD. HEAD predstavlja poslednji komit na grani na kojoj se nalazimo. Dodatno se može koristiti i HEAD\^{}n za referisanje n-tog pretka HEAD komita.


\begin{figure}[h!]
\begin{center}
\includegraphics[scale=0.55]{images/commit.png}
\end{center}
\caption{OVDE NESTO}
\label{fig:slika_commit}
\end{figure}

\subsubsection*{git log}
\label{log}
Komanda |git log| se koristi za izlistavanja detalja o postojećim komitovima. Osnovni format je štur, a može biti i prilično nepregledan ako nas zanima veći broj komitova ili sam razvoj grane. Srećom, ova komanda ima mnoštvo dodatnih opcija i može se koristiti na razne načine. Neke od korisnijih opcija su navedene u tabeli * dok su neki prečice za lepo formatirane ispise izložene u dodatku. 

\begin{table}[h!]
\begin{center}


\begin{tabular}{cc} \hline
komanda & opis\\ \hline
-n <number> & ograničava broj prikazanih komitova na <number> \\
--skip=<number> & preskače <number> komitova pre početka izlistavanja \\
--since=<date> & prikazuje komitove nastale posle <date> \\
--author=<author> & prikazuje komitove navedenog autora \\
--format=<format> & detaljno formatiranje. Slično kao printf. (pogledati man stranice)
\end{tabular}
\caption{Neke od opcija git log komande}
\end{center}
\label{tab:tabela1}

\end{table}


\subsubsection*{git diff}
\label{subsec:git_diff}
Komanda |git diff| ispisuje razlike izmedju radnog direktorijuma i Staging area, radnog direktorijuma i poslednjeg komita ili Stagin area i poslednjeg komita. \\
Podrazumevano se prikazuje razlika izmedju radnog direktorijuma i Stagin area. Ako se navede HEAD ili identifikator nekog drugog komita, prikazaće se razlika izmedju radnog direktorijuma i traženog komita. Opcijom |--cached| se označava da nas zanima razlika izmedju Staging Area i poslednjeg komita.
Izlaz |git diff| komande je sličan diff naredbi na Linux sistemu, al uz male izmene. Pogledajmo na primeru kako izgleda jedan izlaz.
\begin{lstlisting}[language=bash]
diff --git a/main.c b/main.c
index 533bcad..d2a2349 100644
--- a/main.c
+++ b/main.c
@@ -1,3 +1,5 @@
+#include <stdio.h>
 int main(){
-       printf("Hello World!\n");
+       /*Zelimo da nam poruka budu na srpskom jeziku*/
+       printf("Zdravo svete!\n");
 }
\end{lstlisting}
Izlaz |git diff| komande se može razložiti na celine. One su redom: datoteke koji se uporedjuju, metapodaci o datotekama, korišćeni markeri i najzad, promene podeljenje u delove. Razlog deljenja izmena u delove je jednostavan. Ako je u datoteci koja se sastoji od nekoliko hiljada linija, izmenjeno samo par, i to na različitim mestima, mnogo je preglednije prikazati samo delove koji se razlikuju. Nećemo detaljnije zalaziti u detalje ovih celina. One su objasnjenje u http://chimera.labs.oreilly.com/books/1230000000561/ch11.html (dodati u literaturu). Za sad je dovoljno pomenuti da se u slucaju da nije navedene nijedna opcija, linije koje imaju - na pocetku nalaze u verziji koja je u okviru poslednjeg komita, dok su one koje imaju + nalaze u radnoj verziji.


\subsubsection{git checkout}
\label{checkout}

Pomenuti detached head

\subsection{Ispravljanje grešaka}
\label{subsec:greske}

U zavisnosti od toga u kom se stanju nalazi fajl koji sadrži grešku koji želimo da ispravimo, ispravljanje grešaka možemo svrstati u četiri kategorije. One su redom: ispravljanje lokalnih grešaka, ispravljanje grešaka koje se nalaze u Staging Area, ispravljanje komitovanih grešaka i uklanjanje kompletnih komitova.

\subsubsection*{Ispravljanje lokalnih grešaka}
\label{lokalne_greske}
Pretpostavimo da smo napravili grešku koju jos nismo ni pripremili za komit, niti je komitovali, a pritom želimo da je ispravimo. Tacnije, želimo da se vratimo na stanje koje je bilo pre naših izmena. Već smo se upoznali sa komandom checkout i jasno je da ona može da se iskoristi i za ovakvu situaciju. Dakle, dovoljno je komandom git checkout dovući poslednju ispravnu verziju datoteke koja nam je potrebna.

\subsubsection*{Ispravljanje grešaka u Staging Area}
\label{staging_greske}

Sada pretpostavimo da smo napravili dobru izmenu, pripremili je za sledeći komit, a potom shvatili da smo ipak napravili grešku, i da ili želimo da dodamo jos neku izmenu, ili želimo da potpuno odustanemo od izmena.
\subsubsection*{Ispravljanje komitovanih grešaka}
\label{komitovane_greske}
\subsubsection*{Uklanjanje komitova}
\label{uklanjanje_komitova}
git revert \\
git reset \\
git checkout \\

\section{Rad sa granama}
\label{sec:grane}

Ovde pišem tekst. 
Ovde pišem tekst. 
Ovde pišem tekst. 
Ovde pišem tekst. 

\subsection{Pravljenje i praćenje grana}
\label{subsec:pravljenje_grana}

\subsection{Rebase}
\label{subsec:rebase}

\subsection{Merge}
\label{subsec:merge}
Ovde pišem tekst. 
Ovde pišem tekst. 
Ovde pišem tekst. 
Ovde pišem tekst. 
Ovde pišem tekst. 
Ovde pišem tekst. 

\section{Rad sa udaljenim repozitorijumima}
\label{sec:udaljeni_repozitorijumi}

\subsection{git push}
\label{subsec:git_push}



git pull (fetch?)

\section{Zaključak}
\label{sec:zakljucak}

Ovde pišem zaključak. 
Ovde pišem zaključak. 
Ovde pišem zaključak. 
Ovde pišem zaključak. 
Ovde pišem zaključak. 
Ovde pišem zaključak. 
Ovde pišem zaključak. 
Ovde pišem zaključak. 
Ovde pišem zaključak. 
Ovde pišem zaključak. 
Ovde pišem zaključak. 
Ovde pišem zaključak. 


\addcontentsline{toc}{section}{Literatura}
\appendix
\bibliography{seminarski} 
\bibliographystyle{plain}

\appendix
\section{Dodatak}
Ovde pišem dodatne stvari, ukoliko za time ima potrebe.
Ovde pišem dodatne stvari, ukoliko za time ima potrebe.
Ovde pišem dodatne stvari, ukoliko za time ima potrebe.
Ovde pišem dodatne stvari, ukoliko za time ima potrebe.
Ovde pišem dodatne stvari, ukoliko za time ima potrebe.


\end{document}
